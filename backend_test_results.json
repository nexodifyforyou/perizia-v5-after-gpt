{
  "timestamp": "2026-01-05T03:50:42.476179",
  "total_tests": 27,
  "passed_tests": 19,
  "success_rate": 70.37037037037037,
  "critical_failures": [
    {
      "test": "CRITICAL: Review Request Multi-Lot Correctness Patches",
      "expected": 200,
      "actual": 520,
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "Review Request - Analysis Request Failed",
      "issue": "Analysis request failed",
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "CRITICAL: Google Document AI Perizia Extraction",
      "expected": 200,
      "actual": 520,
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "CRITICAL: Perizia Analysis with Evidence",
      "expected": 200,
      "actual": 520,
      "response": {
        "error": "Internal Server Error"
      }
    }
  ],
  "test_details": [
    {
      "test": "Health Check",
      "method": "GET",
      "endpoint": "api/health",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "status": "healthy",
        "timestamp": "2026-01-05T03:47:15.034682+00:00"
      }
    },
    {
      "test": "Get Plans",
      "method": "GET",
      "endpoint": "api/plans",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "plans": [
          {
            "plan_id": "free",
            "name": "Free Trial",
            "name_it": "Prova Gratuita",
            "price": 0.0,
            "currency": "eur",
            "features": [
              "3 Perizia Scans",
              "5 Image Analyses",
              "10 Assistant Messages",
              "Basic Reports"
            ],
            "features_it": [
              "3 Scansioni Perizia",
              "5 Analisi Immagini",
              "10 Messaggi Assistente",
              "Report Base"
            ],
            "quota": {
              "perizia_scans_remaining": 3,
              "image_scans_remaining": 5,
              "assistant_messages_remaining": 10
            }
          },
          {
            "plan_id": "pro",
            "name": "Professional",
            "name_it": "Professionale",
            "price": 49.0,
            "currency": "eur",
            "features": [
              "50 Perizia Scans/month",
              "100 Image Analyses/month",
              "Unlimited Assistant",
              "Premium Reports",
              "Priority Support"
            ],
            "features_it": [
              "50 Scansioni Perizia/mese",
              "100 Analisi Immagini/mese",
              "Assistente Illimitato",
              "Report Premium",
              "Supporto Prioritario"
            ],
            "quota": {
              "perizia_scans_remaining": 50,
              "image_scans_remaining": 100,
              "assistant_messages_remaining": 9999
            }
          },
          {
            "plan_id": "enterprise",
            "name": "Enterprise",
            "name_it": "Enterprise",
            "price": 199.0,
            "currency": "eur",
            "features": [
              "Unlimited Perizia Scans",
              "Unlimited Image Analyses",
              "Unlimited Assistant",
              "Custom Reports",
              "API Access",
              "Dedicated Support"
            ],
            "features_it": [
              "Scansioni Perizia Illimitate",
              "Analisi Immagini Illimitate",
              "Assistente Illimitato",
              "Report Personalizzati",
              "Accesso API",
              "Supporto Dedicato"
            ],
            "quota": {
              "perizia_scans_remaining": 9999,
              "image_scans_remaining": 9999,
              "assistant_messages_remaining": 9999
            }
          }
        ]
      }
    },
    {
      "test": "Auth Me (No Token)",
      "method": "GET",
      "endpoint": "api/auth/me",
      "expected_status": 401,
      "actual_status": 401,
      "success": true,
      "response": {
        "detail": "Not authenticated"
      }
    },
    {
      "test": "Session Auth Flow",
      "method": "POST",
      "endpoint": "api/auth/session",
      "expected_status": 401,
      "actual_status": 520,
      "success": false,
      "response": {
        "detail": "Authentication failed"
      }
    },
    {
      "test": "Auth Me (With Token)",
      "method": "GET",
      "endpoint": "api/auth/me",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "user_id": "test-user-1767584834841",
        "email": "test.user.1767584834842@example.com",
        "name": "Test User",
        "picture": "https://via.placeholder.com/150",
        "plan": "pro",
        "is_master_admin": false,
        "quota": {
          "perizia_scans_remaining": 50,
          "image_scans_remaining": 100,
          "assistant_messages_remaining": 9999
        },
        "created_at": "2026-01-05T03:47:14.842000"
      }
    },
    {
      "test": "Dashboard Stats",
      "method": "GET",
      "endpoint": "api/dashboard/stats",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "total_analyses": 0,
        "total_image_forensics": 0,
        "total_assistant_queries": 0,
        "recent_analyses": [],
        "semaforo_distribution": {},
        "quota": {
          "perizia_scans_remaining": 50,
          "image_scans_remaining": 100,
          "assistant_messages_remaining": 9999
        },
        "plan": "pro"
      }
    },
    {
      "test": "CRITICAL: Review Request Multi-Lot Correctness Patches",
      "method": "POST",
      "endpoint": "api/analysis/perizia",
      "expected_status": 200,
      "actual_status": 520,
      "success": false,
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "CRITICAL: Image Forensics Deterministic Patches",
      "method": "POST",
      "endpoint": "api/analysis/image",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "ok": true,
        "mode": "IMAGE_FORENSICS",
        "result": {
          "schema_version": "nexodify_image_forensics_v2",
          "run": {
            "run_id": "img_run_f0b0a4d0",
            "case_id": "img_case_8e558d77",
            "generated_at_utc": "2026-01-05T03:48:09.329509+00:00",
            "revision": 0,
            "images_analyzed": 1,
            "image_names": [
              "test_forensics.jpg"
            ]
          },
          "findings": [
            {
              "finding_id": "finding_1",
              "category": "STRUTTURALE",
              "title_it": "Stato Conservativo Struttura",
              "title_en": "Structural Condition",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "L'immagine non \u00e8 disponibile per una valutazione.",
              "what_i_see_en": "The image is not available for evaluation.",
              "evidence": "Senza accesso diretto all'immagine non \u00e8 possibile eseguire una valutazione.",
              "action_required_it": "Durante un sopralluogo, verificare crepe e segni di cedimento nelle pareti e nei soffitti.",
              "action_required_en": "During a site visit, check for cracks and signs of settlement in walls and ceilings."
            },
            {
              "finding_id": "finding_2",
              "category": "IMPIANTI",
              "title_it": "Stato degli Impianti Visibili",
              "title_en": "Condition of Visible Systems",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "L'immagine non \u00e8 disponibile per una valutazione.",
              "what_i_see_en": "The image is not available for evaluation.",
              "evidence": "Senza accesso diretto all'immagine non \u00e8 possibile determinare lo stato degli impianti.",
              "action_required_it": "Durante un sopralluogo, controllare lo stato degli impianti elettrici e idraulici.",
              "action_required_en": "During a site visit, check the condition of the electrical and plumbing systems."
            },
            {
              "finding_id": "finding_3",
              "category": "MATERIALI",
              "title_it": "Presenza di Materiali Pericolosi",
              "title_en": "Presence of Hazardous Materials",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "L'immagine non \u00e8 disponibile per una valutazione.",
              "what_i_see_en": "The image is not available for evaluation.",
              "evidence": "Senza accesso diretto all'immagine non \u00e8 possibile identificare materiali pericolosi.",
              "action_required_it": "Durante un sopralluogo, verificare la presenza di amianto o altri materiali pericolosi.",
              "action_required_en": "During a site visit, check for the presence of asbestos or other hazardous materials."
            },
            {
              "finding_id": "finding_4",
              "category": "UMIDITA",
              "title_it": "Segni di Umidit\u00e0 o Muffa",
              "title_en": "Signs of Dampness or Mold",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "L'immagine non \u00e8 disponibile per una valutazione.",
              "what_i_see_en": "The image is not available for evaluation.",
              "evidence": "Senza accesso diretto all'immagine non \u00e8 possibile rilevare segni di umidit\u00e0 o muffa.",
              "action_required_it": "Durante un sopralluogo, cercare macchie di umidit\u00e0 o muffa su pareti e soffitti.",
              "action_required_en": "During a site visit, look for damp or mold stains on walls and ceilings."
            }
          ],
          "overall_assessment": {
            "risk_level": "NON_DETERMINABILE",
            "confidence": "LOW",
            "summary_it": "Analisi di 1 immagini completata con limitazioni. Sopralluogo professionale OBBLIGATORIO per valutazione accurata. L'analisi automatica non pu\u00f2 sostituire un'ispezione diretta.",
            "summary_en": "Analysis of 1 images completed with limitations. Professional inspection MANDATORY for accurate assessment. Automatic analysis cannot replace direct inspection."
          },
          "limitations": [
            "Analisi senza accesso diretto alle immagini",
            "Non \u00e8 possibile verificare stato strutturale",
            "Non \u00e8 possibile rilevare problemi nascosti",
            "Non \u00e8 possibile valutare conformit\u00e0 impianti",
            "Sopralluogo professionale sempre necessario"
          ],
          "qa_pass": {
            "status": "WARN",
            "checks": [
              "Limitazione dell'analisi riconosciuta.",
              "Tutte le valutazioni sono marcate come NON_VERIFICABILE.",
              {
                "code": "QA-ImageCount",
                "result": "OK",
                "note": "Analizzate 1 immagini"
              },
              {
                "code": "QA-EvidenceLocked",
                "result": "OK",
                "note": "Tutti i findings hanno evidence"
              },
              {
                "code": "QA-ConfidenceHonesty",
                "result": "OK",
                "note": "4/4 findings con confidence LOW (onest\u00e0)"
              },
              {
                "code": "QA-NoHallucination",
                "result": "OK",
                "note": "Nessuna certezza inventata"
              }
            ]
          },
          "disclaimer_it": "Documento informativo con LIMITI SIGNIFICATIVI. Non sostituisce ispezione professionale. Non costituisce consulenza tecnica.",
          "disclaimer_en": "Informational document with SIGNIFICANT LIMITATIONS. Does not replace professional inspection. Not technical advice."
        }
      }
    },
    {
      "test": "CRITICAL: Assistant Deterministic Patches (Italian)",
      "method": "POST",
      "endpoint": "api/analysis/assistant",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "ok": true,
        "mode": "ASSISTANT_QA",
        "result": {
          "schema_version": "nexodify_assistant_v2",
          "run": {
            "run_id": "qa_run_d5c877ec",
            "generated_at_utc": "2026-01-05T03:48:11.093795+00:00",
            "case_id": null,
            "revision": 0,
            "has_perizia_context": false,
            "perizia_file": null
          },
          "answer_it": "Non ho informazioni specifiche sul prezzo base d'asta.",
          "answer_en": "I do not have specific information on the starting auction price.",
          "confidence": "LOW",
          "sources": [],
          "needs_more_info": "YES",
          "missing_inputs": [
            "Perizia completa",
            "Avviso di Vendita"
          ],
          "out_of_scope": false,
          "safe_disclaimer_it": "Le informazioni fornite hanno carattere esclusivamente informativo e non costituiscono consulenza legale, fiscale o professionale.",
          "safe_disclaimer_en": "Information provided is for informational purposes only and does not constitute legal, tax or professional advice.",
          "qa_pass": {
            "status": "PASS",
            "checks": [
              {
                "code": "QA-HasContext",
                "result": "WARN",
                "note": "No perizia context available"
              },
              {
                "code": "QA-ConfidenceHonesty",
                "result": "OK",
                "note": "Confidence: LOW"
              },
              {
                "code": "QA-SourcesProvided",
                "result": "WARN",
                "note": "Sources: 0"
              },
              {
                "code": "QA-DisclaimerIncluded",
                "result": "OK",
                "note": "Disclaimer included"
              }
            ]
          }
        }
      }
    },
    {
      "test": "CRITICAL: Google Document AI Perizia Extraction",
      "method": "POST",
      "endpoint": "api/analysis/perizia",
      "expected_status": 200,
      "actual_status": 520,
      "success": false,
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "DELETE Perizia (No Auth)",
      "method": "DELETE",
      "endpoint": "api/analysis/perizia/test_id",
      "expected_status": 401,
      "actual_status": 401,
      "success": true,
      "response": {
        "detail": "Not authenticated"
      }
    },
    {
      "test": "DELETE Images (No Auth)",
      "method": "DELETE",
      "endpoint": "api/analysis/images/test_id",
      "expected_status": 401,
      "actual_status": 401,
      "success": true,
      "response": {
        "detail": "Not authenticated"
      }
    },
    {
      "test": "DELETE Assistant (No Auth)",
      "method": "DELETE",
      "endpoint": "api/analysis/assistant/test_id",
      "expected_status": 401,
      "actual_status": 401,
      "success": true,
      "response": {
        "detail": "Not authenticated"
      }
    },
    {
      "test": "DELETE All History (No Auth)",
      "method": "DELETE",
      "endpoint": "api/history/all",
      "expected_status": 401,
      "actual_status": 401,
      "success": true,
      "response": {
        "detail": "Not authenticated"
      }
    },
    {
      "test": "DELETE Non-existent Perizia",
      "method": "DELETE",
      "endpoint": "api/analysis/perizia/nonexistent_id_12345",
      "expected_status": 404,
      "actual_status": 404,
      "success": true,
      "response": {
        "detail": "Analisi non trovata / Analysis not found"
      }
    },
    {
      "test": "DELETE Non-existent Images",
      "method": "DELETE",
      "endpoint": "api/analysis/images/nonexistent_id_12345",
      "expected_status": 404,
      "actual_status": 404,
      "success": true,
      "response": {
        "detail": "Analisi non trovata / Analysis not found"
      }
    },
    {
      "test": "DELETE Non-existent Assistant",
      "method": "DELETE",
      "endpoint": "api/analysis/assistant/nonexistent_id_12345",
      "expected_status": 404,
      "actual_status": 404,
      "success": true,
      "response": {
        "detail": "Conversazione non trovata / Conversation not found"
      }
    },
    {
      "test": "Create Test Perizia for Deletion",
      "method": "POST",
      "endpoint": "api/analysis/perizia",
      "expected_status": 200,
      "actual_status": 520,
      "success": false,
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "Create Test Image for Deletion",
      "method": "POST",
      "endpoint": "api/analysis/image",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "ok": true,
        "mode": "IMAGE_FORENSICS",
        "result": {
          "schema_version": "nexodify_image_forensics_v2",
          "run": {
            "run_id": "img_run_1831db7a",
            "case_id": "img_case_432be348",
            "generated_at_utc": "2026-01-05T03:50:02.533579+00:00",
            "revision": 0,
            "images_analyzed": 1,
            "image_names": [
              "test_delete_image.jpg"
            ]
          },
          "findings": [
            {
              "finding_id": "FND-001",
              "category": "STRUTTURALE",
              "title_it": "Stato strutturale immobile",
              "title_en": "Structural condition of the property",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "Non posso valutare lo stato strutturale senza accesso diretto all'immagine.",
              "what_i_see_en": "I cannot evaluate the structural condition without direct access to the image.",
              "evidence": "N/A",
              "action_required_it": "Verificare crepe, segni di cedimento o danni strutturali durante un sopralluogo.",
              "action_required_en": "Check for cracks, signs of settlement, or structural damage during an on-site inspection."
            },
            {
              "finding_id": "FND-002",
              "category": "MATERIALI",
              "title_it": "Presenza materiali pericolosi",
              "title_en": "Presence of hazardous materials",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "Non posso identificare materiali pericolosi come amianto senza vedere l'immagine.",
              "what_i_see_en": "I cannot identify hazardous materials like asbestos without seeing the image.",
              "evidence": "N/A",
              "action_required_it": "Durante il sopralluogo, controllare se vi sono materiali che potrebbero contenere amianto o altre sostanze pericolose.",
              "action_required_en": "During the inspection, check for materials that might contain asbestos or other hazardous substances."
            },
            {
              "finding_id": "FND-003",
              "category": "UMIDITA",
              "title_it": "Problemi di umidit\u00e0",
              "title_en": "Moisture issues",
              "severity": "NON_VERIFICABILE",
              "confidence": "LOW",
              "what_i_see_it": "Non \u00e8 possibile rilevare problemi di umidit\u00e0 senza le immagini.",
              "what_i_see_en": "Moisture issues cannot be detected without the images.",
              "evidence": "N/A",
              "action_required_it": "Ispezionare zone con potenziali segni di umidit\u00e0 o muffa.",
              "action_required_en": "Inspect areas for potential signs of moisture or mold."
            }
          ],
          "overall_assessment": {
            "risk_level": "NON_DETERMINABILE",
            "confidence": "LOW",
            "summary_it": "Analisi di 1 immagini completata con limitazioni. Sopralluogo professionale OBBLIGATORIO per valutazione accurata. L'analisi automatica non pu\u00f2 sostituire un'ispezione diretta.",
            "summary_en": "Analysis of 1 images completed with limitations. Professional inspection MANDATORY for accurate assessment. Automatic analysis cannot replace direct inspection."
          },
          "limitations": [
            "Analisi senza accesso diretto alle immagini",
            "Non \u00e8 possibile verificare stato strutturale",
            "Non \u00e8 possibile rilevare problemi nascosti",
            "Non \u00e8 possibile valutare conformit\u00e0 impianti",
            "Sopralluogo professionale sempre necessario"
          ],
          "qa_pass": {
            "status": "WARN",
            "checks": [
              "Possibilit\u00e0 di verifica delle immagini \u00e8 limitata.",
              "Confidence tutti i findings impostata a LOW a causa della mancanza di visibilit\u00e0.",
              {
                "code": "QA-ImageCount",
                "result": "OK",
                "note": "Analizzate 1 immagini"
              },
              {
                "code": "QA-EvidenceLocked",
                "result": "OK",
                "note": "Tutti i findings hanno evidence"
              },
              {
                "code": "QA-ConfidenceHonesty",
                "result": "OK",
                "note": "3/3 findings con confidence LOW (onest\u00e0)"
              },
              {
                "code": "QA-NoHallucination",
                "result": "OK",
                "note": "Nessuna certezza inventata"
              }
            ]
          },
          "disclaimer_it": "Documento informativo con LIMITI SIGNIFICATIVI. Non sostituisce ispezione professionale. Non costituisce consulenza tecnica.",
          "disclaimer_en": "Informational document with SIGNIFICANT LIMITATIONS. Does not replace professional inspection. Not technical advice."
        }
      }
    },
    {
      "test": "Create Test Assistant QA for Deletion",
      "method": "POST",
      "endpoint": "api/analysis/assistant",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "ok": true,
        "mode": "ASSISTANT_QA",
        "result": {
          "schema_version": "nexodify_assistant_v2",
          "run": {
            "run_id": "qa_run_a96093fb",
            "generated_at_utc": "2026-01-05T03:50:05.419366+00:00",
            "case_id": null,
            "revision": 0,
            "has_perizia_context": false,
            "perizia_file": null
          },
          "answer_it": "I principali rischi associati alle aste immobiliari possono includere la non conformit\u00e0 urbanistica, vizi non dichiarati nella perizia CTU, problemi legati a pignoramenti pendenti, o formalit\u00e0 ipotecarie non risolte. Senza una specifica perizia o documentazione legale a supporto, non posso fornire dettagli specifici su rischi correlati in questo caso.",
          "answer_en": "The main risks associated with real estate auctions can include non-compliance with urban planning, undisclosed defects in the CTU appraisal, issues related to pending foreclosures, or unresolved mortgage formalities. Without a specific appraisal or supporting legal documentation, I cannot provide specific details on related risks in this case.",
          "confidence": "MEDIUM",
          "sources": [],
          "needs_more_info": "YES",
          "missing_inputs": [
            "specific appraisal (perizia)",
            "relevant legal documentation"
          ],
          "out_of_scope": false,
          "safe_disclaimer_it": "Le informazioni fornite hanno carattere esclusivamente informativo e non costituiscono consulenza legale, fiscale o professionale.",
          "safe_disclaimer_en": "Information provided is for informational purposes only and does not constitute legal, tax or professional advice.",
          "qa_pass": {
            "status": "PASS",
            "checks": [
              {
                "code": "QA-HasContext",
                "result": "WARN",
                "note": "No perizia context available"
              },
              {
                "code": "QA-ConfidenceHonesty",
                "result": "OK",
                "note": "Confidence: MEDIUM"
              },
              {
                "code": "QA-SourcesProvided",
                "result": "WARN",
                "note": "Sources: 0"
              },
              {
                "code": "QA-DisclaimerIncluded",
                "result": "OK",
                "note": "Disclaimer included"
              }
            ]
          }
        }
      }
    },
    {
      "test": "DELETE Existing Images (forensics_img_run_1831db7a)",
      "method": "DELETE",
      "endpoint": "api/analysis/images/forensics_img_run_1831db7a",
      "expected_status": 200,
      "actual_status": 404,
      "success": false,
      "response": {
        "detail": "Analisi non trovata / Analysis not found"
      }
    },
    {
      "test": "DELETE Existing Assistant QA (qa_qa_run_a96093fb)",
      "method": "DELETE",
      "endpoint": "api/analysis/assistant/qa_qa_run_a96093fb",
      "expected_status": 200,
      "actual_status": 404,
      "success": false,
      "response": {
        "detail": "Conversazione non trovata / Conversation not found"
      }
    },
    {
      "test": "DELETE All History",
      "method": "DELETE",
      "endpoint": "api/history/all",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "ok": true,
        "message": "Tutto lo storico eliminato / All history deleted",
        "deleted": {
          "perizia": 0,
          "images": 2,
          "assistant": 2,
          "total": 4
        }
      }
    },
    {
      "test": "CRITICAL: Perizia Analysis with Evidence",
      "method": "POST",
      "endpoint": "api/analysis/perizia",
      "expected_status": 200,
      "actual_status": 520,
      "success": false,
      "response": {
        "error": "Internal Server Error"
      }
    },
    {
      "test": "Assistant Q&A",
      "method": "POST",
      "endpoint": "api/analysis/assistant",
      "expected_status": 200,
      "actual_status": 200,
      "success": true,
      "response": {
        "ok": true,
        "mode": "ASSISTANT_QA",
        "result": {
          "schema_version": "nexodify_assistant_v2",
          "run": {
            "run_id": "qa_run_57f7a7c4",
            "generated_at_utc": "2026-01-05T03:50:42.390953+00:00",
            "case_id": null,
            "revision": 0,
            "has_perizia_context": false,
            "perizia_file": null
          },
          "answer_it": "Non ho informazioni specifiche sui rischi dell'immobile in quanto non ho accesso ai dettagli della perizia o ad altri documenti rilevanti per questo caso particolare. Tuttavia, i rischi comuni negli immobili messi all'asta possono includere vincoli ipotecari, problemi di conformit\u00e0 urbanistica e catastale, e pendenze legali. Sarebbe utile analizzare una perizia dell'immobile se disponibile.",
          "answer_en": "I do not have specific information on the risks of the property as I do not have access to the details of the appraisal or other relevant documents for this particular case. However, common risks in auctioned properties may include mortgage liens, issues with urban planning and cadastral compliance, and legal liabilities. Reviewing a property appraisal would be helpful if available.",
          "confidence": "LOW",
          "sources": [],
          "needs_more_info": "YES",
          "missing_inputs": [
            "Perizia completa dell'immobile",
            "Documenti legali e catastali"
          ],
          "out_of_scope": false,
          "safe_disclaimer_it": "Le informazioni fornite hanno carattere esclusivamente informativo e non costituiscono consulenza legale, fiscale o professionale.",
          "safe_disclaimer_en": "Information provided is for informational purposes only and does not constitute legal, tax or professional advice.",
          "qa_pass": {
            "status": "WARN",
            "checks": [
              {
                "code": "QA-HasContext",
                "result": "WARN",
                "note": "No perizia context available"
              },
              {
                "code": "QA-ConfidenceHonesty",
                "result": "OK",
                "note": "Confidence: LOW"
              },
              {
                "code": "QA-SourcesProvided",
                "result": "WARN",
                "note": "Sources: 0"
              },
              {
                "code": "QA-DisclaimerIncluded",
                "result": "OK",
                "note": "Disclaimer included"
              }
            ]
          }
        }
      }
    },
    {
      "test": "Perizia Upload (No Auth)",
      "method": "POST",
      "endpoint": "api/analysis/perizia",
      "expected_status": 401,
      "actual_status": 422,
      "success": false,
      "response": {
        "detail": [
          {
            "type": "missing",
            "loc": [
              "body",
              "file"
            ],
            "msg": "Field required",
            "input": null,
            "url": "https://errors.pydantic.dev/2.12/v/missing"
          }
        ]
      }
    },
    {
      "test": "Assistant (No Auth)",
      "method": "POST",
      "endpoint": "api/analysis/assistant",
      "expected_status": 401,
      "actual_status": 401,
      "success": true,
      "response": {
        "detail": "Not authenticated"
      }
    }
  ]
}